<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pycalculix.geometry &mdash; pycalculix  documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="pycalculix  documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">pycalculix  documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for pycalculix.geometry</h1><div class="highlight"><pre>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">atan2</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span> <span class="n">radians</span>
<span class="kn">from</span> <span class="nn">matplotlib.patches</span> <span class="kn">import</span> <span class="n">Arc</span> <span class="k">as</span> <span class="n">AArc</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">base_classes</span>

<span class="c">#accuracy for small numbers in math below</span>
<span class="n">_acc</span> <span class="o">=</span> <span class="o">.</span><span class="mo">00001</span>

<div class="viewcode-block" id="Point"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Point">[docs]</a><span class="k">class</span> <span class="nc">Point</span><span class="p">(</span><span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Makes a point or vector.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">      x (float): vertical coordinate of point</span>
<span class="sd">      y (float): horizontal coordinate of point</span>
<span class="sd">      z (float): in-page coordinate of point, defaults to zero</span>
<span class="sd">    </span>
<span class="sd">    Attributes:</span>
<span class="sd">      x (float): vertical coordinate of point</span>
<span class="sd">      y (float): horizontal coordinate of point</span>
<span class="sd">      z (float): in-page coordinate of point, defaults to zero</span>
<span class="sd">      nodes (Node): a list of nodes in a mesh at this point.</span>
<span class="sd">        list length is 1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">z</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="o">=</span> <span class="p">[]</span>
        <span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        
<div class="viewcode-block" id="Point.get_name"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Point.get_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns item name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&#39;P&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="Point.__eq__"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Point.__eq__">[docs]</a>    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks x and y equality to other point.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          other: passed point        </span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="bp">False</span>
        </div>
<div class="viewcode-block" id="Point.__add__"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Point.__add__">[docs]</a>    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns new point = self + other.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          other: passed point</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          Point = self + other (new point, does not modify self)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Point.__sub__"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Point.__sub__">[docs]</a>    <span class="k">def</span> <span class="nf">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns new point = self - other.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          other: passed point</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          Point = self - other (new point, does not modify self)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Point.__hash__"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Point.__hash__">[docs]</a>    <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the hash of the item to the id number. </span>
<span class="sd">        </span>
<span class="sd">        This allows one to make sets of these items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>        
</div>
<div class="viewcode-block" id="Point.__mul__"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Point.__mul__">[docs]</a>    <span class="k">def</span> <span class="nf">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns new point = self*factor.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          factor (double): factor to multiply the Point by</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          Point = self*factor (new point, does not modify self)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="o">*</span><span class="n">factor</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Point.length"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Point.length">[docs]</a>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the length of this point or vector.&quot;&quot;&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>
        <span class="k">return</span> <span class="n">res</span>
</div>
<div class="viewcode-block" id="Point.make_unit"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Point.make_unit">[docs]</a>    <span class="k">def</span> <span class="nf">make_unit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Modifies self vector to make it a unit vector.&quot;&quot;&quot;</span>
        <span class="n">lenval</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="mi">1</span><span class="o">/</span><span class="n">lenval</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="mi">1</span><span class="o">/</span><span class="n">lenval</span>
</div>
<div class="viewcode-block" id="Point.ang_rad"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Point.ang_rad">[docs]</a>    <span class="k">def</span> <span class="nf">ang_rad</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns angle in radians, assume point is vector from 0,0.&quot;&quot;&quot;</span>
        <span class="n">vert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="n">horiz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="n">radians</span> <span class="o">=</span> <span class="n">atan2</span><span class="p">(</span><span class="n">vert</span><span class="p">,</span> <span class="n">horiz</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">radians</span>
</div>
<div class="viewcode-block" id="Point.ang_deg"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Point.ang_deg">[docs]</a>    <span class="k">def</span> <span class="nf">ang_deg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns angle in degrees, assume point is vector from 0,0.&quot;&quot;&quot;</span>
        <span class="n">radians</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ang_rad</span><span class="p">()</span>
        <span class="n">deg</span> <span class="o">=</span> <span class="n">radians</span> <span class="o">*</span> <span class="mf">180.0</span> <span class="o">/</span> <span class="n">pi</span>
        <span class="k">return</span> <span class="n">deg</span>
</div>
<div class="viewcode-block" id="Point.rot_ccw_deg"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Point.rot_ccw_deg">[docs]</a>    <span class="k">def</span> <span class="nf">rot_ccw_deg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ang</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Rotates the current vector by ccw degrees about 0,0.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          ang: angle or rotation in degrees, counter-clockwise (ccw)        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="n">radians</span><span class="p">(</span><span class="n">ang</span><span class="p">)</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">ang</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">ang</span><span class="p">)</span>
        <span class="n">rad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">ang</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">ang</span><span class="p">)</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="n">rad</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">rad</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">rad</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Point.ang_bet_rad"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Point.ang_bet_rad">[docs]</a>    <span class="k">def</span> <span class="nf">ang_bet_rad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns angle between self and other vector in radians.</span>
<span class="sd">        </span>
<span class="sd">        Assumes vectors start at 0,0</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          other (Point): passed vector</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          angle (float): radians between self vector and other vector</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">avect</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="n">avect</span><span class="o">.</span><span class="n">ang_rad</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ang</span>
</div>
<div class="viewcode-block" id="Point.ang_bet_deg"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Point.ang_bet_deg">[docs]</a>    <span class="k">def</span> <span class="nf">ang_bet_deg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns angle between self and other vector in degrees.</span>

<span class="sd">        Assumes vectors start at 0,0</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          other (Point): passed vector</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          angle (float): degrees between self vector and other vector</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">avect</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="n">avect</span><span class="o">.</span><span class="n">ang_deg</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ang</span>
</div>
<div class="viewcode-block" id="Point.__str__"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Point.__str__">[docs]</a>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns string listing object type, id number, and coordinates&quot;&quot;&quot;</span>
        <span class="n">val</span> <span class="o">=</span> <span class="s">&#39;Point, id </span><span class="si">%i</span><span class="s">, (x,y)=(</span><span class="si">%f</span><span class="s">,</span><span class="si">%f</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">val</span>

</div></div>
<div class="viewcode-block" id="Line"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line">[docs]</a><span class="k">class</span> <span class="nc">Line</span><span class="p">(</span><span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Stores a line from points p1 to p2.</span>
<span class="sd">    </span>
<span class="sd">    Arguments:</span>
<span class="sd">      p1 (Point): first point</span>
<span class="sd">      p2 (Point): second point</span>
<span class="sd">      sign (int): 1 or -1, defines direction of line</span>
<span class="sd">        +1: p1 -&gt; p2</span>
<span class="sd">        -1: p2 -&gt; p1</span>
<span class="sd">    </span>
<span class="sd">    Attributes:</span>
<span class="sd">      _points_ (list of Point) : list of the line&#39;s points [p1,p2]</span>
<span class="sd">      sign (int): 1 or -1, defines direction of line</span>
<span class="sd">        +1: p1 -&gt; p2</span>
<span class="sd">        -1: p2 -&gt; p1</span>
<span class="sd">      midpt (Point): a mid-point between p1 and p2</span>
<span class="sd">      nodes (list of Node): a list of meshed nodes on the line</span>
<span class="sd">      faces (list of Face): a list of meshed faces on the line</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">sign</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_points_</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sign</span> <span class="o">=</span> <span class="n">sign</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midpt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">faces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        
<div class="viewcode-block" id="Line.get_name"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line.get_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the line name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&#39;L&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Line.plot"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line.plot">[docs]</a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draws and labels the line onto the passed Matplotlib axis.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          ax: Matplotlib axis</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lax</span> <span class="o">=</span> <span class="p">[</span><span class="n">pt</span><span class="o">.</span><span class="n">y</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_points_</span><span class="p">]</span>
        <span class="n">lrad</span> <span class="o">=</span> <span class="p">[</span><span class="n">pt</span><span class="o">.</span><span class="n">x</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_points_</span><span class="p">]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">lax</span><span class="p">,</span> <span class="n">lrad</span><span class="p">)</span>
        <span class="n">pax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">midpt</span><span class="o">.</span><span class="n">y</span>
        <span class="n">prad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">midpt</span><span class="o">.</span><span class="n">x</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="p">(</span><span class="n">pax</span><span class="p">,</span><span class="n">prad</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="Line.length"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line.length">[docs]</a>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the length of the line.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Line.set_ediv"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line.set_ediv">[docs]</a>    <span class="k">def</span> <span class="nf">set_ediv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ediv</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the number of element divisions on the line when meshing.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          ediv (int): number of required elements on this line</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ediv</span> <span class="o">=</span> <span class="n">ediv</span>
</div>
<div class="viewcode-block" id="Line.reverse"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line.reverse">[docs]</a>    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a new line flipped in the opposite direction.&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_points_</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_points_</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">sign</span><span class="o">*-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">a</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
        <span class="k">return</span> <span class="n">a</span>
</div>
<div class="viewcode-block" id="Line.pt"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line.pt">[docs]</a>    <span class="k">def</span> <span class="nf">pt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the start or end point of the line.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          ind (int): index of the point we want, 0=start, 1=end</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          Point: requested Point</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sign</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_points_</span><span class="p">[</span><span class="ow">not</span> <span class="n">ind</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_points_</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span>        
</div>
<div class="viewcode-block" id="Line.set_pt"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line.set_pt">[docs]</a>    <span class="k">def</span> <span class="nf">set_pt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">,</span> <span class="n">pt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the line&#39;s point at ind to the new pt.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          ind (int): index of the point we&#39;re updating, 0=start, 1=end</span>
<span class="sd">          pt (Point): new point we are assigning to Line</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># used to update specific points in the line</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sign</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_points_</span><span class="p">[</span><span class="ow">not</span> <span class="n">ind</span><span class="p">]</span> <span class="o">=</span> <span class="n">pt</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_points_</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span> <span class="o">=</span> <span class="n">pt</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">midpt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mid</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Line.mid"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line.mid">[docs]</a>    <span class="k">def</span> <span class="nf">mid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Caclulates and returns a midpoint between start and end points.&quot;&quot;&quot;</span>
        <span class="n">pt</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">*</span><span class="mf">0.5</span>
        <span class="k">return</span> <span class="n">pt</span>
</div>
<div class="viewcode-block" id="Line.touches"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line.touches">[docs]</a>    <span class="k">def</span> <span class="nf">touches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if a line is connected to a passed line.</span>

<span class="sd">        Args:</span>
<span class="sd">          other (Line or Arc): passed other line</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          True: beginning or end point connect to other line</span>
<span class="sd">          False: lines are not connected</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">p1</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">_points_</span> <span class="ow">or</span> <span class="n">p2</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">_points_</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Line.offset"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line.offset">[docs]</a>    <span class="k">def</span> <span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dist</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a new line offset from the dirrent line by value dist.</span>
<span class="sd">        </span>
<span class="sd">        Right hand rule is followed assuming x is the origina line.</span>
<span class="sd">        Z points out of page.</span>
<span class="sd">        Y is the direction of line offset.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          dist (float): distance to offset the new line by</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          tmpline (Line): new Line which is offset from self by dist</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lvect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c"># rotate it ccw by 90 degreeself, and make it a unit</span>
        <span class="n">lvect</span><span class="o">.</span><span class="n">rot_ccw_deg</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
        <span class="n">lvect</span><span class="o">.</span><span class="n">make_unit</span><span class="p">()</span>
        <span class="c"># scale it by the new amount</span>
        <span class="n">lvect</span> <span class="o">=</span> <span class="n">lvect</span><span class="o">*</span><span class="n">dist</span>
        <span class="c"># add the vector onto the defining points</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">lvect</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">lvect</span>
        <span class="n">tmpline</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tmpline</span>
</div>
<div class="viewcode-block" id="Line.get_abc"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line.get_abc">[docs]</a>    <span class="k">def</span> <span class="nf">get_abc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a list of abc terms for a line definition.</span>
<span class="sd">        </span>
<span class="sd">        ax + by + c = 0</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          [a,b,c]: list of the above line terms</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lpt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">lpt</span><span class="o">.</span><span class="n">x</span> 
        <span class="n">dy</span> <span class="o">=</span> <span class="n">lpt</span><span class="o">.</span><span class="n">y</span>
        <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dy</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c"># vertical radial line</span>
            <span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">y</span><span class="o">*-</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">dx</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c"># horizontal axial line</span>
            <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">x</span><span class="o">*-</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">slope</span> <span class="o">=</span> <span class="n">dy</span><span class="o">/</span><span class="n">dx</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">slope</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">x</span>
            <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="n">slope</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Line.get_perp_vec"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line.get_perp_vec">[docs]</a>    <span class="k">def</span> <span class="nf">get_perp_vec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pt</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns vector perpendicular to current line.</span>

<span class="sd">        Vector is created by rotating the current line ccw 90 degrees</span>
<span class="sd">        around the start point.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          pt (Point): defaults to None, unused for Line, used for Arc</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          lvect (Point): vector that is perpendiculat to the current line        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lvect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">lvect</span><span class="o">.</span><span class="n">rot_ccw_deg</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lvect</span>
</div>
<div class="viewcode-block" id="Line.arc_tang_intersection"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line.arc_tang_intersection">[docs]</a>    <span class="k">def</span> <span class="nf">arc_tang_intersection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pt</span><span class="p">,</span> <span class="n">mag</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns an intersecction point on this line of an arc centered at pt</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          pt (Point): arc center point</span>
<span class="sd">          mag (float): passed radius distance from the arc center to the line</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          newpt (Point or None):</span>
<span class="sd">            Point: the intersection point</span>
<span class="sd">            None: returns None if no intersection point exists</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_perp_vec</span><span class="p">()</span>
        <span class="n">v</span><span class="o">.</span><span class="n">make_unit</span><span class="p">()</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">pt</span><span class="o">+</span><span class="n">v</span><span class="o">*</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">mag</span><span class="p">)</span>

        <span class="n">tmpline</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">pt</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
        <span class="n">newpt</span> <span class="o">=</span> <span class="n">tmpline</span><span class="o">.</span><span class="n">intersects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">newpt</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="bp">None</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&#39;Intersection failed!&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">newpt</span>
</div>
<div class="viewcode-block" id="Line.coincident"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line.coincident">[docs]</a>    <span class="k">def</span> <span class="nf">coincident</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks to see if pt is on the line.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          pt (Point): input point to check</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          bool: True if pt on line or False if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_abc</span><span class="p">()</span>
        <span class="n">remainder</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">pt</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">b</span><span class="o">*</span><span class="n">pt</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">c</span>
        <span class="k">if</span> <span class="n">remainder</span> <span class="o">&lt;</span> <span class="n">_acc</span><span class="p">:</span>
            <span class="c"># point is on the line equation, but is it between end pts</span>
            <span class="n">lvect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="c"># point0 + lvect*term = pt</span>
            <span class="n">nondim</span> <span class="o">=</span> <span class="n">pt</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">nondim</span> <span class="o">=</span> <span class="n">nondim</span><span class="o">.</span><span class="n">x</span><span class="o">/</span><span class="n">lvect</span><span class="o">.</span><span class="n">x</span>
            <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">nondim</span> <span class="o">&lt;=</span> <span class="mf">1.0</span><span class="p">:</span>
                <span class="c"># we&#39;re on the line</span>
                <span class="k">return</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># we&#39;re off of the line</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># point is not on line equation</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Line.intersects"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line.intersects">[docs]</a>    <span class="k">def</span> <span class="nf">intersects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if other line intersects this line.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          other (Line or Arc): other line to check</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          Point or None:</span>
<span class="sd">            Point: intersection point</span>
<span class="sd">            None: None if lines don&#39;t intersect</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># returns intersection point between this line and other line</span>
        <span class="c"># other is a straight line</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Line</span><span class="p">):</span>
            <span class="n">slope1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_abc</span><span class="p">()</span>
            <span class="n">slope2</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_abc</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">slope1</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="n">slope2</span><span class="p">[:</span><span class="mi">2</span><span class="p">]:</span>
                <span class="c"># lines are paralel and will not have an intersection point</span>
                <span class="k">return</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># parametric intersection calculation</span>
                <span class="c"># p1 -&gt; p2 = ta parametric, p2 -&gt; p3 tb parametric</span>
                <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">other</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">other</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                <span class="p">(</span><span class="n">x1</span><span class="p">,</span><span class="n">x2</span><span class="p">,</span><span class="n">x3</span><span class="p">,</span><span class="n">x4</span><span class="p">)</span><span class="o">=</span> <span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p3</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p4</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                <span class="p">(</span><span class="n">y1</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">y3</span><span class="p">,</span><span class="n">y4</span><span class="p">)</span><span class="o">=</span> <span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p3</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p4</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
                <span class="p">(</span><span class="n">x31</span><span class="p">,</span><span class="n">x21</span><span class="p">,</span><span class="n">x43</span><span class="p">)</span><span class="o">=</span><span class="p">(</span><span class="n">x3</span><span class="o">-</span><span class="n">x1</span><span class="p">,</span><span class="n">x2</span><span class="o">-</span><span class="n">x1</span><span class="p">,</span><span class="n">x4</span><span class="o">-</span><span class="n">x3</span><span class="p">)</span>
                <span class="p">(</span><span class="n">y31</span><span class="p">,</span><span class="n">y21</span><span class="p">,</span><span class="n">y43</span><span class="p">)</span><span class="o">=</span><span class="p">(</span><span class="n">y3</span><span class="o">-</span><span class="n">y1</span><span class="p">,</span><span class="n">y2</span><span class="o">-</span><span class="n">y1</span><span class="p">,</span><span class="n">y4</span><span class="o">-</span><span class="n">y3</span><span class="p">)</span>
                <span class="n">tanum</span> <span class="o">=</span> <span class="n">x43</span><span class="o">*</span><span class="n">y31</span> <span class="o">-</span> <span class="n">x31</span><span class="o">*</span><span class="n">y43</span>
                <span class="n">tadenom</span> <span class="o">=</span> <span class="n">x43</span><span class="o">*</span><span class="n">y21</span> <span class="o">-</span> <span class="n">x21</span><span class="o">*</span><span class="n">y43</span>
                <span class="n">tbnum</span> <span class="o">=</span> <span class="n">x21</span><span class="o">*</span><span class="n">y31</span> <span class="o">-</span> <span class="n">x31</span><span class="o">*</span><span class="n">y21</span>
                <span class="n">tbdenom</span> <span class="o">=</span> <span class="n">x43</span><span class="o">*</span><span class="n">y21</span> <span class="o">-</span> <span class="n">x21</span><span class="o">*</span><span class="n">y43</span>
                <span class="k">if</span> <span class="n">tadenom</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">tbdenom</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ta</span> <span class="o">=</span> <span class="n">tanum</span><span class="o">/</span><span class="n">tadenom</span>
                    <span class="n">tb</span> <span class="o">=</span> <span class="n">tbnum</span><span class="o">/</span><span class="n">tbdenom</span>
                    <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">ta</span> <span class="o">&lt;=</span> <span class="mf">1.0</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">tb</span> <span class="o">&lt;=</span> <span class="mf">1.0</span><span class="p">:</span>
                        <span class="n">pnew</span> <span class="o">=</span> <span class="p">(</span><span class="n">p2</span><span class="o">-</span><span class="n">p1</span><span class="p">)</span>
                        <span class="n">pt</span> <span class="o">=</span> <span class="n">p1</span> <span class="o">+</span> <span class="n">pnew</span><span class="o">*</span><span class="n">ta</span>
                        <span class="k">return</span> <span class="n">pt</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c"># intersection is outside the line bounds</span>
                        <span class="k">return</span> <span class="bp">None</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># arc line intersection</span>
            <span class="k">return</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="Line.__str__"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Line.__str__">[docs]</a>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns string listing object type, id number, and points&quot;&quot;&quot;</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">val</span> <span class="o">=</span> <span class="s">&#39;Line, id </span><span class="si">%i</span><span class="s"> p0: </span><span class="si">%s</span><span class="s"> p1: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">val</span>

</div></div>
<div class="viewcode-block" id="Arc"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc">[docs]</a><span class="k">class</span> <span class="nc">Arc</span><span class="p">(</span><span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Makes an arc from points p1 to p2 about center actr.</span>
<span class="sd">    </span>
<span class="sd">    Arcs should be 90 degrees maximum.</span>
<span class="sd">    </span>
<span class="sd">    Arguments:</span>
<span class="sd">      p1 (Point): first point</span>
<span class="sd">      p2 (Point): second point</span>
<span class="sd">      actr (Point): arc center</span>
<span class="sd">      sign (int): 1 or -1, defines direction of line</span>
<span class="sd">        +1: p1 -&gt; p2</span>
<span class="sd">        -1: p2 -&gt; p1</span>
<span class="sd">    </span>
<span class="sd">    Attributes:</span>
<span class="sd">      _points_ (list of Point) : list of the line&#39;s points [p1,p2]</span>
<span class="sd">      sign (int): 1 or -1, defines direction of line</span>
<span class="sd">        +1: p1 -&gt; p2</span>
<span class="sd">        -1: p2 -&gt; p1</span>
<span class="sd">      actr (Point): arc center</span>
<span class="sd">      radius (float): radius of the arc</span>
<span class="sd">      concavity (str):</span>
<span class="sd">        &#39;concave&#39;: concave arc</span>
<span class="sd">        &#39;convex&#39;: convex arc</span>
<span class="sd">      midpt (Point): a mid-point between p1 and p2</span>
<span class="sd">      nodes (list of Node): a list of meshed nodes on the line</span>
<span class="sd">      faces (list of Face): a list of meshed faces on the line</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">actr</span><span class="p">,</span> <span class="n">sign</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_points_</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sign</span> <span class="o">=</span> <span class="n">sign</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actr</span> <span class="o">=</span> <span class="n">actr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="p">(</span><span class="n">p1</span><span class="o">-</span><span class="n">actr</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">concavity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_concavity</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midpt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">faces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>        

<div class="viewcode-block" id="Arc.get_name"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc.get_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the arc name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&#39;L&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="Arc.plot"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc.plot">[docs]</a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draws and labels the arc onto the passed Matplotlib axis.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          ax: Matplotlib axis</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">pax</span><span class="p">,</span> <span class="n">prad</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">midpt</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">midpt</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="p">(</span><span class="n">pax</span><span class="p">,</span><span class="n">prad</span><span class="p">))</span>
        
        <span class="c"># need center, radiuself, ang1, and ang2</span>
        <span class="n">ctr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="n">vect1</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">sign</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">concavity</span> <span class="o">==</span> <span class="s">&#39;concave&#39;</span><span class="p">:</span>
            <span class="n">vect1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-</span><span class="n">ctr</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sign</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="n">vect1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="n">ctr</span>
        <span class="n">rad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>
        <span class="n">ang1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vect1</span><span class="o">.</span><span class="n">ang_deg</span><span class="p">())</span>
        <span class="n">ang2</span> <span class="o">=</span> <span class="n">ang1</span> <span class="o">+</span> <span class="n">sign</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">get_ang</span><span class="p">()</span>

        <span class="c"># matplotlib assumes ccw arc drawing, calculix assumes cw drawing, reverse order</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">AArc</span><span class="p">(</span><span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="n">ctr</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">ctr</span><span class="o">.</span><span class="n">x</span><span class="p">],</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">rad</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">rad</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">theta1</span><span class="o">=</span><span class="n">ang1</span><span class="p">,</span> <span class="n">theta2</span><span class="o">=</span><span class="n">ang2</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_artist</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Arc.length"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc.length">[docs]</a>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the length of the arc.&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ang_bet_rad</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">*</span><span class="n">ang</span>
        <span class="k">return</span> <span class="n">res</span>
</div>
<div class="viewcode-block" id="Arc.set_ediv"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc.set_ediv">[docs]</a>    <span class="k">def</span> <span class="nf">set_ediv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ediv</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the number of element divisions on the arc when meshing.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          ediv (int): number of required elements on this arc</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ediv</span> <span class="o">=</span> <span class="n">ediv</span>
</div>
<div class="viewcode-block" id="Arc.reverse"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc.reverse">[docs]</a>    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a new arc flipped in the opposite direction.&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">Arc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_points_</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_points_</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">sign</span><span class="o">*-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">a</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
        <span class="k">return</span> <span class="n">a</span>
</div>
<div class="viewcode-block" id="Arc.pt"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc.pt">[docs]</a>    <span class="k">def</span> <span class="nf">pt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the start or end point of the arc.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          ind (int): index of the point we want, 0=start, 1=end</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          Point: requested Point</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sign</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_points_</span><span class="p">[</span><span class="ow">not</span> <span class="n">ind</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_points_</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span>   
        </div>
<div class="viewcode-block" id="Arc.mid"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc.mid">[docs]</a>    <span class="k">def</span> <span class="nf">mid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Caclulates and returns the midpoint of the arc.&quot;&quot;&quot;</span> 
        <span class="n">pt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pt_at</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pt</span>
</div>
<div class="viewcode-block" id="Arc.touches"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc.touches">[docs]</a>    <span class="k">def</span> <span class="nf">touches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if this arc is connected to a passed line.</span>

<span class="sd">        Args:</span>
<span class="sd">          other (Line or Arc): passed other line</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          True: beginning or end point connect to other line</span>
<span class="sd">          False: lines are not connected</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">p1</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">_points_</span> <span class="ow">or</span> <span class="n">p2</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">_points_</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Arc.sgn"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc.sgn">[docs]</a>    <span class="k">def</span> <span class="nf">sgn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns sign of the passed value.</span>
<span class="sd">        </span>
<span class="sd">        Helper function for self.interects code.</span>

<span class="sd">        Args:</span>
<span class="sd">          val (float): passed value</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          1 or -1: sign of the passed value, assumes sign of zero = 1        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="Arc.get_ang"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc.get_ang">[docs]</a>    <span class="k">def</span> <span class="nf">get_ang</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns angle from beginning to end of arc from arc ctr in degrees</span>
<span class="sd">        </span>
<span class="sd">        Notes:</span>
<span class="sd">          Answer is between 180 and -180</span>
<span class="sd">          Positive is concave</span>
<span class="sd">          Negative is convex</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ang_bet_deg</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ang</span>
</div>
<div class="viewcode-block" id="Arc.get_concavity"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc.get_concavity">[docs]</a>    <span class="k">def</span> <span class="nf">get_concavity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns concavity of this arc, &#39;concave&#39; or &#39;convex&#39;.&quot;&quot;&quot;</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ang</span><span class="p">()</span>        
        <span class="n">res</span> <span class="o">=</span> <span class="s">&#39;concave&#39;</span>
        <span class="k">if</span> <span class="n">ang</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="s">&#39;convex&#39;</span>
        <span class="k">return</span> <span class="n">res</span>
        </div>
<div class="viewcode-block" id="Arc.get_pt_at"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc.get_pt_at">[docs]</a>    <span class="k">def</span> <span class="nf">get_pt_at</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nondim</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns point on arc between start and end point at nondim dist.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          nondim (float): distance between start and end point, 0=start, 1=end</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          res (Point): requested point on arc</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span>

        <span class="c"># neg is convex, pos is concave</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ang</span><span class="p">()</span>
        
        <span class="n">ang_delta</span> <span class="o">=</span> <span class="n">nondim</span><span class="o">*</span><span class="n">ang</span>
        <span class="n">a</span><span class="o">.</span><span class="n">rot_ccw_deg</span><span class="p">(</span><span class="n">ang_delta</span><span class="p">)</span>

        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span> <span class="o">+</span> <span class="n">a</span>
        <span class="k">return</span> <span class="n">res</span>
</div>
<div class="viewcode-block" id="Arc.get_perp_vec"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc.get_perp_vec">[docs]</a>    <span class="k">def</span> <span class="nf">get_perp_vec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns vector perpendicular to current arc.</span>

<span class="sd">        Right hand rule is used:</span>
<span class="sd">          X+ is the direction of the arc from start to end.</span>
<span class="sd">          Z+ is out of the page</span>
<span class="sd">          Y+ is the direction of the perpendicular vector</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          pt (Point): point on arc where we want the perpendicular vector</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          resv (Point): perpendicular vector</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resv</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">concavity</span> <span class="o">==</span> <span class="s">&#39;convex&#39;</span><span class="p">:</span>
            <span class="n">resv</span> <span class="o">=</span> <span class="n">pt</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">concavity</span> <span class="o">==</span> <span class="s">&#39;concave&#39;</span><span class="p">:</span>
            <span class="n">resv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span> <span class="o">-</span> <span class="n">pt</span>
        <span class="k">return</span> <span class="n">resv</span>
</div>
<div class="viewcode-block" id="Arc.coincident"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc.coincident">[docs]</a>    <span class="k">def</span> <span class="nf">coincident</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks to see if pt is on the arc.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          pt (Point): input point to check</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          bool: True if pt on arc or False if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># (x - xc)^2 + (y - yc)^2 - r^2 = 0</span>
        <span class="n">remainder</span> <span class="o">=</span> <span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span><span class="o">.</span><span class="n">y</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">**</span><span class="mi">2</span>
        <span class="k">if</span> <span class="n">remainder</span> <span class="o">&lt;</span> <span class="n">_acc</span><span class="p">:</span>
            <span class="c"># point is on the circle, but is it in the arc?</span>
            <span class="c"># check if the angle traversed to the point is within the ang</span>
            <span class="c"># traversed by the arc</span>
            <span class="n">a1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
            <span class="n">a2</span> <span class="o">=</span> <span class="n">pt</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
            <span class="n">ang_pt</span> <span class="o">=</span> <span class="n">a1</span><span class="o">.</span><span class="n">ang_bet_deg</span><span class="p">(</span><span class="n">a2</span><span class="p">)</span>
            
            <span class="c"># this is the angle traversed byt the arc</span>
            <span class="n">ang</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ang</span><span class="p">()</span>
            <span class="n">minval</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ang</span><span class="p">)</span>
            <span class="n">maxval</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ang</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">minval</span> <span class="o">&lt;=</span> <span class="n">ang_pt</span> <span class="o">&lt;=</span> <span class="n">maxval</span><span class="p">:</span>
                <span class="c"># point is on our arc</span>
                <span class="k">return</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># point on circle but outside our arc</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># point not on arc</span>
            <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Arc.intersects"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc.intersects">[docs]</a>    <span class="k">def</span> <span class="nf">intersects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if other line intersects this arc.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          other (Line or Arc): other line to check</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          Point or None:</span>
<span class="sd">            Point: intersection point</span>
<span class="sd">            None: None if lines don&#39;t intersect</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Line</span><span class="p">):</span>
            <span class="c"># arc-line intersection</span>
            <span class="c"># reset the math to be about the circle centroid</span>
            <span class="c"># formula from: http://mathworld.wolfram.com/Circle-LineIntersection.html</span>
            <span class="n">p1</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
            <span class="c"># for us x and y are reversed because of y axial</span>
            <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span>
            <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>
            <span class="n">dr</span> <span class="o">=</span> <span class="p">(</span><span class="n">dx</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">dy</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">D</span> <span class="o">=</span> <span class="n">x1</span><span class="o">*</span><span class="n">y2</span> <span class="o">-</span> <span class="n">x2</span><span class="o">*</span><span class="n">y1</span>
            <span class="n">discr</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">*</span><span class="p">(</span><span class="n">r</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">dr</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="n">D</span><span class="o">**</span><span class="mi">2</span>
            <span class="k">if</span> <span class="n">discr</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c"># no intersection</span>
                <span class="k">return</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># tangent or intersection</span>
                <span class="n">x1</span> <span class="o">=</span> <span class="p">(</span><span class="n">D</span><span class="o">*</span><span class="n">dy</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">sgn</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span><span class="o">*</span><span class="n">dx</span><span class="o">*</span><span class="p">((</span><span class="n">r</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">dr</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="n">D</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="n">dr</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
                <span class="n">y1</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">D</span><span class="o">*</span><span class="n">dx</span><span class="o">+</span><span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span><span class="o">*</span><span class="n">dx</span><span class="o">*</span><span class="p">((</span><span class="n">r</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">dr</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="n">D</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="n">dr</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
                <span class="n">x2</span> <span class="o">=</span> <span class="p">(</span><span class="n">D</span><span class="o">*</span><span class="n">dy</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">sgn</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span><span class="o">*</span><span class="n">dx</span><span class="o">*</span><span class="p">((</span><span class="n">r</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">dr</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="n">D</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="n">dr</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
                <span class="n">y2</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">D</span><span class="o">*</span><span class="n">dx</span><span class="o">-</span><span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span><span class="o">*</span><span class="n">dx</span><span class="o">*</span><span class="p">((</span><span class="n">r</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">dr</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="n">D</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="n">dr</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

                <span class="c"># convert result points back to global coordinates</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
                <span class="n">p2</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">y2</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
                <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="c"># check that the resultant points are on line and arcs</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">coincident</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">coincident</span><span class="p">(</span><span class="n">p1</span><span class="p">):</span>
                    <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">p1</span> <span class="o">!=</span> <span class="n">p2</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">coincident</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">coincident</span><span class="p">(</span><span class="n">p2</span><span class="p">):</span>
                    <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">res</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Arc</span><span class="p">):</span>
            <span class="c"># arc-arc intersection</span>
            <span class="c"># I have not yet written the code here</span>
            <span class="k">pass</span>
</div>
<div class="viewcode-block" id="Arc.__str__"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Arc.__str__">[docs]</a>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns string listing object type, id number, and points&quot;&quot;&quot;</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">actr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="n">val</span> <span class="o">=</span> <span class="s">&#39;Arc, id </span><span class="si">%i</span><span class="s"> p0: </span><span class="si">%s</span><span class="s"> p1: </span><span class="si">%s</span><span class="s"> actr: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">actr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">val</span>

</div></div>
<div class="viewcode-block" id="Area"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Area">[docs]</a><span class="k">class</span> <span class="nc">Area</span><span class="p">(</span><span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Makes an area.</span>
<span class="sd">    </span>
<span class="sd">    Area is closed in a clockwise direction.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">      p (Part): parent part</span>
<span class="sd">      line_list (list): list of Lines and Arcs that close the area</span>
<span class="sd">    </span>
<span class="sd">    Attributes:</span>
<span class="sd">      p (Part): parent part</span>
<span class="sd">      closed (boolean): True if closed, False if not</span>
<span class="sd">      lines (list): list of lines or arcs that define the area</span>
<span class="sd">      matl (Matl): the material fo the area</span>
<span class="sd">      etype (str): element type of area. Options are:</span>
<span class="sd">        &#39;plstress&#39;: plane stress</span>
<span class="sd">        &#39;plstrain&#39;: plane strain</span>
<span class="sd">        &#39;axisym&#39;: axisymmetric</span>
<span class="sd">      area (double): in-plane part area (ballpark number, arcs not calc right)</span>
<span class="sd">      centroid (Point or None): the area centroid point. None before closed.</span>
<span class="sd">      nodes (list): child mesh nodes that are in the area</span>
<span class="sd">      elements (list): child elements that are in the area</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">line_list</span><span class="o">=</span><span class="p">[]):</span>
        <span class="c"># initialtes the area</span>
        <span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">=</span> <span class="n">p</span> <span class="c"># parent part reference</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matl</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">etype</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">centroid</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">line_list</span><span class="p">)</span>        

<div class="viewcode-block" id="Area.set_child_ccxtypes"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Area.set_child_ccxtypes">[docs]</a>    <span class="k">def</span> <span class="nf">set_child_ccxtypes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assigns the child element ccx types.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">etype</span> <span class="o">!=</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&#39;elements&#39;</span><span class="p">):</span>
            <span class="c"># if etype is set and elements have been assigned</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
                <span class="n">e</span><span class="o">.</span><span class="n">set_ccxtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">etype</span><span class="p">)</span>
        </div>
<div class="viewcode-block" id="Area.set_etype"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Area.set_etype">[docs]</a>    <span class="k">def</span> <span class="nf">set_etype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">etype</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the area etype.</span>
<span class="sd">        </span>
<span class="sd">        Sets the ccxtype on elements if they have been assigned to this area.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          etype (str): element type</span>
<span class="sd">            &#39;plstress&#39; plane stress</span>
<span class="sd">            &#39;plstrain&#39;: plane strain</span>
<span class="sd">            &#39;axisym&#39;: axisymmetric</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">etype</span> <span class="o">=</span> <span class="n">etype</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_child_ccxtypes</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Area.get_name"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Area.get_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the area name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&#39;A&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="Area.close"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Area.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Closes the area.&quot;&quot;&quot;</span>
        <span class="c"># sets closed=True</span>
        <span class="c"># calculates the area center</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calc_center</span><span class="p">()</span>        
</div>
<div class="viewcode-block" id="Area.update"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Area.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Updates the area&#39;s line list to the passed list.</span>
<span class="sd">        </span>
<span class="sd">        The area&#39;s line list is replaced with the passed line list.</span>
<span class="sd">        If the area is cosed, self.close() will be called.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          line_list (list): list of Lines or Arcs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># adds the line list and checks for closure</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="n">line_list</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                </div>
<div class="viewcode-block" id="Area.line_from_startpt"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Area.line_from_startpt">[docs]</a>    <span class="k">def</span> <span class="nf">line_from_startpt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the line in the area that start at the passed pt.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          pt (Point): the start point of the line one wants</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          None or line (Line or Arc): Returns None if no line is found,</span>
<span class="sd">            otherwise the correct line or arc which starts with pt will be</span>
<span class="sd">            returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># returns the line that starts on the given point</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="n">pt</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">line</span>
        <span class="k">return</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="Area.get_points"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Area.get_points">[docs]</a>    <span class="k">def</span> <span class="nf">get_points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns all the child points in the area.</span>
<span class="sd">        </span>
<span class="sd">        These are the points that define all lines and arcs in the area.</span>
<span class="sd">        Does not return arc center points, only line start and end points.</span>
<span class="sd">        Only unique points are returned (no duplicate points).</span>
<span class="sd">        Points are generated by iterating through the line_list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
            <span class="n">p1</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">p1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pts</span><span class="p">:</span>
                <span class="n">pts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">p2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pts</span><span class="p">:</span>
                <span class="n">pts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pts</span>
</div>
<div class="viewcode-block" id="Area.calc_center"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Area.calc_center">[docs]</a>    <span class="k">def</span> <span class="nf">calc_center</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculates the area centroid, the center of the area.</span>
<span class="sd">        </span>
<span class="sd">        Attributes area and centroid are set by this method:</span>
<span class="sd">          area (double): in-plane part area (ballpark number, arcs not calc right)</span>
<span class="sd">          centroid (Point): the area centroid point.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># get list of points, append first point as last</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_points</span><span class="p">()</span>
        <span class="n">pts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        
        <span class="c"># loop to get area and centroid</span>
        <span class="n">cx</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">cy</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">area</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">term1</span> <span class="o">=</span> <span class="p">(</span><span class="n">pts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">pts</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="n">pts</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">pts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
            <span class="n">area</span> <span class="o">+=</span> <span class="mf">1.0</span><span class="o">*</span><span class="n">term1</span>
            <span class="n">cx</span> <span class="o">+=</span> <span class="p">(</span><span class="n">pts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">pts</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">term1</span>
            <span class="n">cy</span> <span class="o">+=</span> <span class="p">(</span><span class="n">pts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">pts</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">)</span><span class="o">*</span><span class="n">term1</span>
        <span class="n">area</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">area</span>
        <span class="n">cx</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mf">6.0</span><span class="o">*</span><span class="n">area</span><span class="p">))</span><span class="o">*</span><span class="n">cx</span>
        <span class="n">cy</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mf">6.0</span><span class="o">*</span><span class="n">area</span><span class="p">))</span><span class="o">*</span><span class="n">cy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="n">area</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">centroid</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Area.get_maxlength"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Area.get_maxlength">[docs]</a>    <span class="k">def</span> <span class="nf">get_maxlength</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns max distance between points in an area.&quot;&quot;&quot;</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_points</span><span class="p">()</span>
        <span class="n">maxlen</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="c"># loop through points checking dist to next point</span>
        <span class="k">for</span> <span class="n">ind</span><span class="p">,</span> <span class="n">p1</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pts</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">p2</span> <span class="ow">in</span> <span class="n">pts</span><span class="p">[</span><span class="n">ind</span><span class="p">:]:</span>
                <span class="n">vect</span> <span class="o">=</span> <span class="n">p1</span> <span class="o">-</span> <span class="n">p2</span>
                <span class="n">dist</span> <span class="o">=</span> <span class="n">vect</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">dist</span> <span class="o">&gt;</span> <span class="n">maxlen</span><span class="p">:</span>
                    <span class="n">maxlen</span> <span class="o">=</span> <span class="n">dist</span>
        <span class="k">return</span> <span class="n">maxlen</span>
</div>
<div class="viewcode-block" id="Area.add"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Area.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds line to the area definition.</span>
<span class="sd">        </span>
<span class="sd">        Line is added to the end of the lines list.</span>
<span class="sd">        Area is closed if needed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># this adds a line to the area</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="c"># check to see if the area is closed</span>
        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Area.pt_inside"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Area.pt_inside">[docs]</a>    <span class="k">def</span> <span class="nf">pt_inside</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns bool telling if pt is inside the area.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          pt (Point): point we are checking</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">          bool: True if in this area False if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># check bounding box first</span>
        <span class="c"># we assume that the point is not on the boundary lines</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_points</span><span class="p">()</span>
        <span class="n">xs</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">x</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pts</span><span class="p">]</span>
        <span class="n">ys</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">y</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pts</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">pt</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="nb">max</span><span class="p">(</span><span class="n">xs</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">pt</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ys</span><span class="p">)):</span>
            <span class="c"># point is in area bounding box</span>
            <span class="n">vlen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_maxlength</span><span class="p">()</span>
            <span class="n">pend</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="mf">0.0001</span><span class="o">*</span><span class="n">vlen</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">y</span><span class="o">+</span><span class="n">vlen</span><span class="p">)</span>
            <span class="n">cutline</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">pt</span><span class="p">,</span> <span class="n">pend</span><span class="p">)</span>
            <span class="n">overlaps</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
                <span class="n">ipts</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">intersects</span><span class="p">(</span><span class="n">cutline</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">ipts</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">([])</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ipts</span><span class="p">,</span> <span class="n">Point</span><span class="p">):</span>
                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">ipts</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">([]):</span>
                        <span class="c"># we intersected an arc and hit it twice</span>
                        <span class="n">overlaps</span> <span class="o">+=</span> <span class="mi">2</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">overlaps</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="c"># if overlaps is odd, we are in the polygon</span>
            <span class="k">if</span> <span class="n">overlaps</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># point is outside of area bounding box</span>
            <span class="k">return</span> <span class="bp">False</span>
        </div>
<div class="viewcode-block" id="Area.line_insert"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Area.line_insert">[docs]</a>    <span class="k">def</span> <span class="nf">line_insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lgiven</span><span class="p">,</span> <span class="n">lnew</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Insets line lnew after the given line.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">          lgiven (Line or Arc): the line before the place we will insert a line</span>
<span class="sd">          lnew (Line or Arc): the new line we will insert after lgiven</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># this inserts a line after the given line</span>
        <span class="k">if</span> <span class="n">lgiven</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">lgiven</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span><span class="n">lnew</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
    </div>
<div class="viewcode-block" id="Area.__str__"><a class="viewcode-back" href="../../pycalculix.geometry.html#pycalculix.geometry.Area.__str__">[docs]</a>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a string listing the area&#39;s name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
        </div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">pycalculix  documentation</a> &raquo;</li>
          <li><a href="../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Author.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>